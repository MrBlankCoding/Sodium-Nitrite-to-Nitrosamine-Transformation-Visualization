<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sodium Nitrite to Nitrosamine</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2196F3;
            --primary-dark: #1976D2;
            --primary-light: #BBDEFB;
            --bg-dark: #121212;
            --bg-panel: #1E1E1E;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: white;
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        /* Animations */
        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }
        
        .animate-pulse-slow {
            animation: pulse 2s infinite ease-in-out;
        }

        /* Mobile panel transitions */
        .panel-transition {
            transition: transform 0.3s ease-in-out;
        }
        
        /* Molecule tooltip animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tooltip-appear {
            animation: fadeIn 0.2s forwards;
        }
        
        /* Step indicator dots */
        .step-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.3);
            margin: 0 5px;
            transition: all 0.3s ease;
        }
        
        .step-dot.active {
            background-color: var(--primary);
            transform: scale(1.2);
        }
    </style>
</head>
<body class="overflow-hidden">
    <!-- Loading screen -->
    <div id="loading" class="fixed top-0 left-0 w-full h-full bg-gray-900 flex flex-col justify-center items-center z-50">
        <div class="w-16 h-16 border-4 border-gray-700 rounded-full border-t-blue-500 animate-spin mb-5"></div>
        <div class="text-xl text-white tracking-wide">Loading Molecular Visualization...</div>
        <p class="text-gray-400 mt-3 text-sm max-w-xs text-center">Preparing 3D models and reaction pathway...</p>
    </div>

    <div id="main-container" class="flex relative w-full h-full">
        <!-- Info panel -->
        <div id="info-panel" class="fixed md:absolute top-0 left-0 w-full md:w-80 lg:w-96 h-full bg-gray-900 text-white z-10 overflow-hidden flex flex-col shadow-xl panel-transition transform -translate-y-full md:translate-y-0 md:-translate-x-full">
            <div class="p-4 bg-blue-800 flex justify-between items-center border-b border-gray-700">
                <h1 class="text-xl font-semibold flex items-center">
                    <i class="fas fa-atom mr-2"></i>
                    Sodium Nitrite to Nitrosamine
                </h1>
                <button id="close-panel" class="md:hidden rounded-full w-8 h-8 flex items-center justify-center hover:bg-blue-700 transition-colors">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- Tab content containers -->
            <div class="tab-content flex-1 overflow-y-auto flex flex-col" data-tab="info">
                <!-- Container with two distinct sections -->
                <div class="flex flex-col flex-1">
                    <!-- Current molecule info - fixed header -->
                    <div class="p-4 border-b border-gray-700 bg-blue-900 bg-opacity-20 sticky top-0 z-10">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-medium text-base flex items-center">
                                <i class="fas fa-flask mr-2 text-blue-400"></i> Current Molecule
                            </h3>
                            <span id="molecule-step-indicator" class="text-xs px-2 py-1 rounded-full bg-blue-500 text-white font-medium">Step 1/4</span>
                        </div>
                        
                        <div id="molecular-properties" class="rounded-lg overflow-hidden bg-gray-800 bg-opacity-50 p-3 text-sm"></div>
                    </div>
                    
                    <!-- Scientific context - scrollable area -->
                    <div class="p-4 flex-1">
                        <h3 class="font-medium text-base mb-3 flex items-center">
                            <i class="fas fa-microscope mr-2 text-blue-400"></i> Scientific Context
                        </h3>
                        <div id="context-content" class="text-sm text-gray-200 space-y-4 pb-16"></div>
                    </div>
                </div>
            </div>
            
            <!-- Fixed bottom controls for Info tab -->
            <div class="tab-content-footer" data-tab="info">
                <div class="p-4 bg-gray-800 border-t border-gray-700">
                    <div class="flex flex-col gap-3">
                        <div class="flex gap-2">
                            <button id="prev-btn" class="flex-1 py-2.5 px-4 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 rounded-lg text-white font-medium transition-all flex items-center justify-center gap-2">
                                <i class="fas fa-chevron-left"></i> Previous
                            </button>
                            <button id="next-btn" class="flex-1 py-2.5 px-4 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 rounded-lg text-white font-medium transition-all flex items-center justify-center gap-2">
                                Next <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 3D Canvas container -->
        <div id="canvas-container" class="w-full h-full relative">
            <!-- Floating action buttons -->
            <div class="fixed bottom-6 right-6 z-20 flex flex-col gap-3">
                <button id="reset-camera-btn" class="w-12 h-12 bg-gray-800 hover:bg-gray-700 text-white rounded-full shadow-lg flex items-center justify-center transition-all hover:scale-105 active:scale-95 border border-gray-700">
                    <i class="fas fa-camera-rotate"></i>
                </button>
                <button id="toggle-fullscreen" class="w-12 h-12 bg-gray-800 hover:bg-gray-700 text-white rounded-full shadow-lg flex items-center justify-center transition-all hover:scale-105 active:scale-95 border border-gray-700">
                    <i class="fas fa-expand"></i>
                </button>
            </div>
            
            <!-- Toggle info panel button (fixed in mobile view) -->
            <button id="toggle-info-panel" class="fixed top-6 left-6 w-12 h-12 bg-blue-600 hover:bg-blue-700 rounded-full shadow-lg flex items-center justify-center z-20 text-white border-none transition-transform hover:scale-105 active:scale-95">
                <i class="fas fa-info"></i>
            </button>
        </div>
        
        <!-- Bottom step title -->
        <div id="step-navigator" class="fixed bottom-8 left-1/2 transform -translate-x-1/2 z-10 w-4/5 max-w-lg pointer-events-none">
            <div class="step-title text-center bg-black bg-opacity-60 backdrop-blur-sm py-3 px-5 rounded-2xl font-medium shadow-lg border border-gray-800">
                Initial State: Sodium Nitrite
            </div>
        </div>
    </div>

    <!-- Advanced tooltips -->
    <div id="molecule-tooltip" class="hidden fixed bg-black bg-opacity-80 text-white p-3 rounded-lg text-sm z-50 pointer-events-none max-w-xs backdrop-blur-sm border border-blue-500 shadow-lg">
        <div class="flex items-center justify-between mb-1.5">
            <span id="tooltip-title" class="font-semibold"></span>
            <span id="tooltip-symbol" class="text-blue-400"></span>
        </div>
        <div id="tooltip-description" class="text-gray-300"></div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r132/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
    <!-- Shaders -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/shaders/CopyShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/shaders/FXAAShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/shaders/ColorCorrectionShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/shaders/FilmShader.js"></script>
    <!-- Post processing -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/postprocessing/UnrealBloomPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/postprocessing/FilmPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
    <script src="static/script.js"></script>
</body>
</html>
